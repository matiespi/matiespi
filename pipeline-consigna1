pipeline {
    agent any
     parameters {
        string(name: 'palabra_clave', defaultValue: '', description: 'Ingresa el error a buscar')
    }
    stages {
        stage('Download') {
            steps {
                sh "curl -O /tmp/apache_logs https://raw.githubusercontent.com/elastic/examples/master/Common%20Data%20Formats/apache_logs/apache_logs)"
                grep -c params.palabra_clave /tmp/apache_logs
                 // Buscar la palabra clave en el archivo
                def resultadoGrep = sh(script: "grep -c '${params.palabra_clave}' /tmp/apache_logs", returnStatus: true)
                
                // Comprobar el resultado de la b√∫squeda
                if (resultadoGrep == 0) {
                    echo "No se encontraron ocurrencias de '${params.palabra_clave}' en el archivo."
                } else {
                    echo "Se encontraron ${resultadoGrep} ocurrencias de '${params.palabra_clave}' en el archivo."
                }
            }
        }
    }
}